/**Taken from Kanzi: https://github.com/flanglet/kanzi
 * TODO: Transpile to Typescript: https://github.com/lgrignon/jsweet-maven-plugin
 * Renaud Pawlak's jsweet-quickstart
 * */

package ezcompress;

import java.io.BufferedInputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;
import java.util.HashMap;
import java.util.Map;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

import ezcompress.io.CompressedInputStream;
import ezcompress.io.CompressedOutputStream;

@SpringBootApplication 
public class EZCompressApplication implements CommandLineRunner {

	public static void main(String[] args) {
		SpringApplication.run(EZCompressApplication.class, args);
	}

	@Override
	public void run(String... args) throws Exception {
		//example JSON: 19673 bytes
		final String strJSON = "[{\"firstName\":\"Fred\",\"lastName\":\"Cleo\",\"isMale\":\"false\",\"birthDate\":\"1922-10-05\",\"city\":\"Valletta\",\"country\":\"Portugal\",\"countryCode\":\"JO\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Annecorinne\",\"lastName\":\"Hashim\",\"isMale\":\"true\",\"birthDate\":\"1941-06-27\",\"city\":\"Espoo\",\"country\":\"China\",\"countryCode\":\"PT\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Jenilee\",\"lastName\":\"Barbey\",\"isMale\":\"true\",\"birthDate\":\"2008-01-26\",\"city\":\"Jamestown\",\"country\":\"United Arab Emirates\",\"countryCode\":\"PG\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Kittie\",\"lastName\":\"Firmin\",\"isMale\":\"false\",\"birthDate\":\"1978-01-01\",\"city\":\"Johor Bahru\",\"country\":\"Brunei Darussalam\",\"countryCode\":\"CU\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Tera\",\"lastName\":\"Atcliffe\",\"isMale\":\"true\",\"birthDate\":\"2005-07-06\",\"city\":\"Mamoudzou\",\"country\":\"Falkland Islands (Malvinas)\",\"countryCode\":\"IT\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Doralynne\",\"lastName\":\"Lane\",\"isMale\":\"false\",\"birthDate\":\"1953-02-17\",\"city\":\"Konya\",\"country\":\"Montserrat\",\"countryCode\":\"VE\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Karina\",\"lastName\":\"Anis\",\"isMale\":\"false\",\"birthDate\":\"1988-10-24\",\"city\":\"Birkirkara\",\"country\":\"Puerto Rico\",\"countryCode\":\"BV\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Queenie\",\"lastName\":\"Milde\",\"isMale\":\"true\",\"birthDate\":\"1955-07-16\",\"city\":\"Wonsan\",\"country\":\"Guinea-Bissau\",\"countryCode\":\"BR\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Lila\",\"lastName\":\"Abernon\",\"isMale\":\"true\",\"birthDate\":\"1961-08-02\",\"city\":\"Tagbilaran\",\"country\":\"French Guiana\",\"countryCode\":\"IR\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Mariele\",\"lastName\":\"Denis\",\"isMale\":\"false\",\"birthDate\":\"2000-07-20\",\"city\":\"Surat\",\"country\":\"Svalbard and Jan Mayen\",\"countryCode\":\"GL\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Aimil\",\"lastName\":\"Camden\",\"isMale\":\"false\",\"birthDate\":\"1925-10-18\",\"city\":\"Atlanta\",\"country\":\"Angola\",\"countryCode\":\"FM\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Dorthy\",\"lastName\":\"Katrine\",\"isMale\":\"true\",\"birthDate\":\"1987-08-25\",\"city\":\"Pretoria\",\"country\":\"Bosnia and Herzegovina\",\"countryCode\":\"FM\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Karolina\",\"lastName\":\"Boehike\",\"isMale\":\"false\",\"birthDate\":\"1932-09-08\",\"city\":\"MaceiÃ³\",\"country\":\"Croatia\",\"countryCode\":\"VN\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Mignon\",\"lastName\":\"Weitman\",\"isMale\":\"false\",\"birthDate\":\"1935-02-04\",\"city\":\"Sri Jayawardenapura-Kotte\",\"country\":\"Falkland Islands (Malvinas)\",\"countryCode\":\"FR\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Kial\",\"lastName\":\"Sidonius\",\"isMale\":\"true\",\"birthDate\":\"1966-09-17\",\"city\":\"Lagos\",\"country\":\"Virgin Islands, U.S.\",\"countryCode\":\"SR\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Sarette\",\"lastName\":\"Jacinda\",\"isMale\":\"false\",\"birthDate\":\"1936-10-31\",\"city\":\"Birmingham\",\"country\":\"Tokelau\",\"countryCode\":\"LS\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Benita\",\"lastName\":\"Harriman\",\"isMale\":\"false\",\"birthDate\":\"1977-11-18\",\"city\":\"Tegucigalpa\",\"country\":\"Swaziland\",\"countryCode\":\"SC\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Pamella\",\"lastName\":\"Atcliffe\",\"isMale\":\"false\",\"birthDate\":\"1963-04-04\",\"city\":\"Jeddah\",\"country\":\"Guinea\",\"countryCode\":\"GT\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Belinda\",\"lastName\":\"Ciapas\",\"isMale\":\"false\",\"birthDate\":\"1925-10-25\",\"city\":\"Kota Kinabalu\",\"country\":\"Senegal\",\"countryCode\":\"GD\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Ada\",\"lastName\":\"Valerio\",\"isMale\":\"true\",\"birthDate\":\"1966-04-13\",\"city\":\"Yakutsk\",\"country\":\"South Georgia and the South Sandwich Islands\",\"countryCode\":\"LI\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Cyndie\",\"lastName\":\"Eckblad\",\"isMale\":\"true\",\"birthDate\":\"1986-06-28\",\"city\":\"Maseru\",\"country\":\"Slovakia\",\"countryCode\":\"TO\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Linzy\",\"lastName\":\"Elo\",\"isMale\":\"true\",\"birthDate\":\"1936-09-27\",\"city\":\"Saint-Pierre\",\"country\":\"Palestinian Territory, Occupied\",\"countryCode\":\"BO\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Tamqrah\",\"lastName\":\"Amethist\",\"isMale\":\"false\",\"birthDate\":\"1926-11-09\",\"city\":\"City of Halifax\",\"country\":\"Bolivia\",\"countryCode\":\"RO\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Odessa\",\"lastName\":\"Solitta\",\"isMale\":\"true\",\"birthDate\":\"1959-04-17\",\"city\":\"Chengdu\",\"country\":\"Holy See (Vatican City State)\",\"countryCode\":\"GG\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Dari\",\"lastName\":\"Swanhildas\",\"isMale\":\"false\",\"birthDate\":\"1949-02-18\",\"city\":\"Nashville\",\"country\":\"Moldova, Republic of\",\"countryCode\":\"HR\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Lauryn\",\"lastName\":\"Raimondo\",\"isMale\":\"false\",\"birthDate\":\"1963-09-17\",\"city\":\"Fukuoka\",\"country\":\"San Marino\",\"countryCode\":\"GF\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Willetta\",\"lastName\":\"Loleta\",\"isMale\":\"false\",\"birthDate\":\"1986-07-30\",\"city\":\"Omsk\",\"country\":\"Gambia\",\"countryCode\":\"KR\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Clementine\",\"lastName\":\"Haerr\",\"isMale\":\"false\",\"birthDate\":\"1963-07-07\",\"city\":\"Mata-Utu\",\"country\":\"Algeria\",\"countryCode\":\"LC\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Brietta\",\"lastName\":\"Wadell\",\"isMale\":\"true\",\"birthDate\":\"1927-12-07\",\"city\":\"Willemstad\",\"country\":\"Liberia\",\"countryCode\":\"LB\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Hermione\",\"lastName\":\"Chick\",\"isMale\":\"false\",\"birthDate\":\"1988-09-03\",\"city\":\"Roseau\",\"country\":\"Greece\",\"countryCode\":\"MA\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Annabela\",\"lastName\":\"Ruvolo\",\"isMale\":\"false\",\"birthDate\":\"1937-05-28\",\"city\":\"Maseru\",\"country\":\"Burkina Faso\",\"countryCode\":\"VG\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Annabela\",\"lastName\":\"Ricki\",\"isMale\":\"false\",\"birthDate\":\"1972-03-05\",\"city\":\"Bissau\",\"country\":\"Uruguay\",\"countryCode\":\"PK\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Dania\",\"lastName\":\"Aaberg\",\"isMale\":\"false\",\"birthDate\":\"1933-11-02\",\"city\":\"Detroit\",\"country\":\"Somalia\",\"countryCode\":\"SE\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Nollie\",\"lastName\":\"Demitria\",\"isMale\":\"true\",\"birthDate\":\"1981-10-15\",\"city\":\"Port Louis\",\"country\":\"Saudi Arabia\",\"countryCode\":\"DO\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Mamie\",\"lastName\":\"Christine\",\"isMale\":\"true\",\"birthDate\":\"1935-06-28\",\"city\":\"Antwerp\",\"country\":\"Saint Lucia\",\"countryCode\":\"ES\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Caryl\",\"lastName\":\"Bevin\",\"isMale\":\"false\",\"birthDate\":\"1950-01-20\",\"city\":\"Kuwait City\",\"country\":\"Brunei Darussalam\",\"countryCode\":\"CF\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Halette\",\"lastName\":\"Blake\",\"isMale\":\"true\",\"birthDate\":\"1971-12-04\",\"city\":\"Santiago\",\"country\":\"Togo\",\"countryCode\":\"BH\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Nariko\",\"lastName\":\"Wallis\",\"isMale\":\"true\",\"birthDate\":\"2009-11-20\",\"city\":\"Chihuahua\",\"country\":\"Germany\",\"countryCode\":\"CA\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Christian\",\"lastName\":\"Frodi\",\"isMale\":\"true\",\"birthDate\":\"1986-03-27\",\"city\":\"Port Elizabeth\",\"country\":\"Qatar\",\"countryCode\":\"MP\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Ilse\",\"lastName\":\"Lynn\",\"isMale\":\"false\",\"birthDate\":\"1940-10-25\",\"city\":\"Buenos Aires\",\"country\":\"Liberia\",\"countryCode\":\"RO\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Elmira\",\"lastName\":\"An\",\"isMale\":\"true\",\"birthDate\":\"1976-07-05\",\"city\":\"Chennai\",\"country\":\"Bulgaria\",\"countryCode\":\"PR\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Shannah\",\"lastName\":\"Thomasina\",\"isMale\":\"true\",\"birthDate\":\"1957-02-24\",\"city\":\"Algiers\",\"country\":\"Guernsey\",\"countryCode\":\"SY\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Selma\",\"lastName\":\"Zitvaa\",\"isMale\":\"true\",\"birthDate\":\"1966-09-09\",\"city\":\"Melekeok\",\"country\":\"Malawi\",\"countryCode\":\"GA\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Valeda\",\"lastName\":\"Dermott\",\"isMale\":\"true\",\"birthDate\":\"1982-06-20\",\"city\":\"Tashkent\",\"country\":\"Afghanistan\",\"countryCode\":\"KR\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Jolyn\",\"lastName\":\"Yate\",\"isMale\":\"false\",\"birthDate\":\"1996-08-06\",\"city\":\"Jaipur\",\"country\":\"Liechtenstein\",\"countryCode\":\"CS\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Tina\",\"lastName\":\"Corabella\",\"isMale\":\"false\",\"birthDate\":\"2006-01-03\",\"city\":\"Panama City\",\"country\":\"Guernsey\",\"countryCode\":\"SZ\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Norine\",\"lastName\":\"Hewitt\",\"isMale\":\"false\",\"birthDate\":\"1971-06-07\",\"city\":\"Pretoria\",\"country\":\"Saint Lucia\",\"countryCode\":\"ZA\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Jemie\",\"lastName\":\"Amethist\",\"isMale\":\"true\",\"birthDate\":\"2000-11-15\",\"city\":\"Hat Yai\",\"country\":\"United Arab Emirates\",\"countryCode\":\"NU\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Elsie\",\"lastName\":\"Honoria\",\"isMale\":\"true\",\"birthDate\":\"1953-09-27\",\"city\":\"Xi'an\",\"country\":\"Saint Vincent and the Grenadines\",\"countryCode\":\"UG\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Stevana\",\"lastName\":\"Cloris\",\"isMale\":\"true\",\"birthDate\":\"1934-08-06\",\"city\":\"Port Moresby\",\"country\":\"Cyprus\",\"countryCode\":\"CM\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Magdalena\",\"lastName\":\"Gaulin\",\"isMale\":\"true\",\"birthDate\":\"1991-09-14\",\"city\":\"Belmopan\",\"country\":\"Bermuda\",\"countryCode\":\"RE\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Mignon\",\"lastName\":\"Pulsifer\",\"isMale\":\"true\",\"birthDate\":\"1948-02-20\",\"city\":\"Alofi\",\"country\":\"Bermuda\",\"countryCode\":\"WF\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Amelia\",\"lastName\":\"Firmin\",\"isMale\":\"false\",\"birthDate\":\"1989-12-23\",\"city\":\"San Juan\",\"country\":\"Sudan\",\"countryCode\":\"PM\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Aubrie\",\"lastName\":\"Primalia\",\"isMale\":\"false\",\"birthDate\":\"2004-11-10\",\"city\":\"Chittagong\",\"country\":\"Samoa\",\"countryCode\":\"DJ\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Fernande\",\"lastName\":\"Torray\",\"isMale\":\"false\",\"birthDate\":\"1944-10-23\",\"city\":\"Rabat\",\"country\":\"Sao Tome and Principe\",\"countryCode\":\"VA\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Christy\",\"lastName\":\"Bakerman\",\"isMale\":\"true\",\"birthDate\":\"1963-05-20\",\"city\":\"Tiraspol\",\"country\":\"Kazakhstan\",\"countryCode\":\"SJ\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Sherrie\",\"lastName\":\"Marijo\",\"isMale\":\"false\",\"birthDate\":\"1979-06-25\",\"city\":\"Busan\",\"country\":\"Trinidad and Tobago\",\"countryCode\":\"BI\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Olivette\",\"lastName\":\"Johnsson\",\"isMale\":\"true\",\"birthDate\":\"1971-03-03\",\"city\":\"Hamilton\",\"country\":\"Brazil\",\"countryCode\":\"PR\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Bobbi\",\"lastName\":\"Tippets\",\"isMale\":\"true\",\"birthDate\":\"1925-10-12\",\"city\":\"Patna\",\"country\":\"Algeria\",\"countryCode\":\"BY\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Adelle\",\"lastName\":\"Chauncey\",\"isMale\":\"false\",\"birthDate\":\"2001-11-19\",\"city\":\"Stepanakert\",\"country\":\"Zimbabwe\",\"countryCode\":\"VU\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Rhea\",\"lastName\":\"Valerio\",\"isMale\":\"true\",\"birthDate\":\"1959-05-26\",\"city\":\"Kingston\",\"country\":\"Cayman Islands\",\"countryCode\":\"AM\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Dorthy\",\"lastName\":\"Stav\",\"isMale\":\"true\",\"birthDate\":\"1969-05-10\",\"city\":\"Taiyuan\",\"country\":\"New Caledonia\",\"countryCode\":\"MQ\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Melanie\",\"lastName\":\"Greenwald\",\"isMale\":\"false\",\"birthDate\":\"1976-09-14\",\"city\":\"Shijiazhuang\",\"country\":\"Saint Helena\",\"countryCode\":\"AE\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Ottilie\",\"lastName\":\"Darian\",\"isMale\":\"true\",\"birthDate\":\"1958-05-22\",\"city\":\"Jaipur\",\"country\":\"Vanuatu\",\"countryCode\":\"IQ\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Ada\",\"lastName\":\"Quinn\",\"isMale\":\"false\",\"birthDate\":\"1953-11-05\",\"city\":\"Lilongwe\",\"country\":\"Saint Lucia\",\"countryCode\":\"SB\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Constance\",\"lastName\":\"Corabella\",\"isMale\":\"true\",\"birthDate\":\"1922-09-02\",\"city\":\"Toulouse\",\"country\":\"Marshall Islands\",\"countryCode\":\"RW\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Sherrie\",\"lastName\":\"Connelly\",\"isMale\":\"true\",\"birthDate\":\"1998-04-14\",\"city\":\"St. Louis\",\"country\":\"Slovakia\",\"countryCode\":\"MC\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Feliza\",\"lastName\":\"Zola\",\"isMale\":\"true\",\"birthDate\":\"1963-03-28\",\"city\":\"Nuuk\",\"country\":\"Kyrgyzstan\",\"countryCode\":\"GR\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Elbertina\",\"lastName\":\"Neils\",\"isMale\":\"false\",\"birthDate\":\"1923-10-26\",\"city\":\"Hamilton\",\"country\":\"Niue\",\"countryCode\":\"GL\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Eugine\",\"lastName\":\"Judye\",\"isMale\":\"false\",\"birthDate\":\"1986-09-24\",\"city\":\"Samara\",\"country\":\"Saint Pierre and Miquelon\",\"countryCode\":\"AU\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Shaine\",\"lastName\":\"Cookie\",\"isMale\":\"false\",\"birthDate\":\"1975-07-18\",\"city\":\"Prague\",\"country\":\"Indonesia\",\"countryCode\":\"MD\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Rebeca\",\"lastName\":\"Johanna\",\"isMale\":\"false\",\"birthDate\":\"1988-06-25\",\"city\":\"Naples\",\"country\":\"Brunei Darussalam\",\"countryCode\":\"BD\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Jere\",\"lastName\":\"Skell\",\"isMale\":\"false\",\"birthDate\":\"1963-05-26\",\"city\":\"Washington\",\"country\":\"Iran, Islamic Republic Of\",\"countryCode\":\"KE\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Belva\",\"lastName\":\"Kravits\",\"isMale\":\"false\",\"birthDate\":\"1986-01-24\",\"city\":\"Fukuoka\",\"country\":\"United Arab Emirates\",\"countryCode\":\"BD\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Susette\",\"lastName\":\"Brieta\",\"isMale\":\"false\",\"birthDate\":\"1941-08-06\",\"city\":\"Bangkok\",\"country\":\"Trinidad and Tobago\",\"countryCode\":\"SH\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Beth\",\"lastName\":\"Wittie\",\"isMale\":\"false\",\"birthDate\":\"1999-08-19\",\"city\":\"Chihuahua\",\"country\":\"Belgium\",\"countryCode\":\"MH\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Rubie\",\"lastName\":\"Nerita\",\"isMale\":\"true\",\"birthDate\":\"2005-03-20\",\"city\":\"Jaipur\",\"country\":\"Guam\",\"countryCode\":\"KW\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Augustine\",\"lastName\":\"Remmer\",\"isMale\":\"false\",\"birthDate\":\"1943-07-21\",\"city\":\"Copenhagen\",\"country\":\"Papua New Guinea\",\"countryCode\":\"MU\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Ninnetta\",\"lastName\":\"Alfons\",\"isMale\":\"true\",\"birthDate\":\"2001-08-08\",\"city\":\"Iqaluit\",\"country\":\"Thailand\",\"countryCode\":\"MK\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Zia\",\"lastName\":\"Margarete\",\"isMale\":\"false\",\"birthDate\":\"1989-01-19\",\"city\":\"Francistown\",\"country\":\"Mozambique\",\"countryCode\":\"PW\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Marti\",\"lastName\":\"Wilona\",\"isMale\":\"true\",\"birthDate\":\"1969-04-25\",\"city\":\"Ä°zmir\",\"country\":\"Malawi\",\"countryCode\":\"TJ\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Valera\",\"lastName\":\"Dannye\",\"isMale\":\"false\",\"birthDate\":\"1997-03-12\",\"city\":\"San Juan\",\"country\":\"Tajikistan\",\"countryCode\":\"AZ\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Harrietta\",\"lastName\":\"Gemini\",\"isMale\":\"false\",\"birthDate\":\"1923-11-07\",\"city\":\"El Paso\",\"country\":\"Angola\",\"countryCode\":\"TG\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Marnia\",\"lastName\":\"Bevin\",\"isMale\":\"false\",\"birthDate\":\"1949-09-20\",\"city\":\"Vatican City\",\"country\":\"Guernsey\",\"countryCode\":\"GR\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Janis\",\"lastName\":\"Warthman\",\"isMale\":\"false\",\"birthDate\":\"1938-01-17\",\"city\":\"YaoundÃ©\",\"country\":\"Wallis and Futuna\",\"countryCode\":\"VE\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Modestia\",\"lastName\":\"Salvidor\",\"isMale\":\"true\",\"birthDate\":\"2005-09-15\",\"city\":\"Chicago\",\"country\":\"Poland\",\"countryCode\":\"FM\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Tamqrah\",\"lastName\":\"Morgun\",\"isMale\":\"true\",\"birthDate\":\"1973-06-26\",\"city\":\"Xining\",\"country\":\"Algeria\",\"countryCode\":\"WS\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Dulcinea\",\"lastName\":\"Lipson\",\"isMale\":\"false\",\"birthDate\":\"1949-03-28\",\"city\":\"Chiang Mai\",\"country\":\"Solomon Islands\",\"countryCode\":\"ZM\",\"favoriteFruit\":\"walnut\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Renae\",\"lastName\":\"Adalbert\",\"isMale\":\"false\",\"birthDate\":\"1997-03-22\",\"city\":\"Hamilton\",\"country\":\"Seychelles\",\"countryCode\":\"BY\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Ira\",\"lastName\":\"Maxi\",\"isMale\":\"true\",\"birthDate\":\"1942-06-05\",\"city\":\"Raleigh\",\"country\":\"Bosnia and Herzegovina\",\"countryCode\":\"NC\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Micheline\",\"lastName\":\"Sinegold\",\"isMale\":\"true\",\"birthDate\":\"1973-10-28\",\"city\":\"Nairobi\",\"country\":\"Saint Vincent and the Grenadines\",\"countryCode\":\"BI\",\"favoriteFruit\":\"pear\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Rori\",\"lastName\":\"Frodi\",\"isMale\":\"false\",\"birthDate\":\"1994-07-28\",\"city\":\"Las Palmas de Gran Canaria\",\"country\":\"Reunion\",\"countryCode\":\"GU\",\"favoriteFruit\":\"apple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Tabbatha\",\"lastName\":\"Lail\",\"isMale\":\"true\",\"birthDate\":\"2004-05-07\",\"city\":\"Muscat\",\"country\":\"Sudan\",\"countryCode\":\"HN\",\"favoriteFruit\":\"pineapple\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Jacquetta\",\"lastName\":\"Edison\",\"isMale\":\"true\",\"birthDate\":\"1924-05-10\",\"city\":\"Valencia\",\"country\":\"Virgin Islands, British\",\"countryCode\":\"CI\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Vita\",\"lastName\":\"Tound\",\"isMale\":\"false\",\"birthDate\":\"2000-05-25\",\"city\":\"Dresden\",\"country\":\"RWANDA\",\"countryCode\":\"LU\",\"favoriteFruit\":\"peach\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Beth\",\"lastName\":\"Erlandson\",\"isMale\":\"false\",\"birthDate\":\"1984-12-03\",\"city\":\"Naples\",\"country\":\"Brunei Darussalam\",\"countryCode\":\"HK\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Glynnis\",\"lastName\":\"Pip\",\"isMale\":\"false\",\"birthDate\":\"1991-02-28\",\"city\":\"Padang\",\"country\":\"Egypt\",\"countryCode\":\"GR\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Kenna\",\"lastName\":\"Nahum\",\"isMale\":\"true\",\"birthDate\":\"1988-06-17\",\"city\":\"Kota Kinabalu\",\"country\":\"South Africa\",\"countryCode\":\"PR\",\"favoriteFruit\":\"cherry\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Fred\",\"lastName\":\"Gaulin\",\"isMale\":\"true\",\"birthDate\":\"1980-09-20\",\"city\":\"Surabaya\",\"country\":\"Bangladesh\",\"countryCode\":\"CM\",\"favoriteFruit\":\"plum\",\"email\":\".@yopmail.com\"},{\"firstName\":\"Nicoli\",\"lastName\":\"Abernon\",\"isMale\":\"false\",\"birthDate\":\"1986-10-05\",\"city\":\"Anchorage\",\"country\":\"Chad\",\"countryCode\":\"HN\",\"favoriteFruit\":\"sourcherry\",\"email\":\".@yopmail.com\"}]";
		//compress it
		final byte[] inputBytes = strJSON.getBytes(StandardCharsets.UTF_8);
		System.out.println("Compression: strJSON = \n" + strJSON);
		final Map<String, Object> params = Map.of(
				"codec", "TPAQX",
				"transform", "EXE+RLT+TEXT+UTF",
				"jobs", 1,
				"blockSize", 16777216,
				"skipBlocks", false,
				"fileSize", (long)inputBytes.length,
				"extra", true,
				"checksum", false,
				"verbosity", 1);
		final ByteArrayOutputStream baos = new ByteArrayOutputStream(inputBytes.length);
		final CompressedOutputStream cos = new CompressedOutputStream(baos, params);
		cos.write(inputBytes, 0, inputBytes.length);
		cos.close();
		
		System.out.println("Written to CompressedOutputStream: " + cos.getWritten());
		final byte[] compressedBytes = baos.toByteArray();
		System.out.println("Written to baos, length= " + compressedBytes.length);
		System.out.println("Written to baos Content:\n" + compressedBytes);
		Files.write(Paths.get("C:/tmp/personal-data.knz"), compressedBytes, StandardOpenOption.CREATE);

		//decompress back:
        ByteArrayInputStream bais = new ByteArrayInputStream(compressedBytes);
        InputStream is = new BufferedInputStream(bais);
        HashMap<String, Object> ctx2 = new HashMap<>();
        CompressedInputStream cis = new CompressedInputStream(is, ctx2);
        byte[] decompressedBytes = new byte[inputBytes.length];
        while (cis.read(decompressedBytes, 0, inputBytes.length) == inputBytes.length) {  }
        cis.close();
        final String strDecompressedJSON = new String(decompressedBytes, StandardCharsets.UTF_8);
        System.out.println("decompressedJSON= " + strDecompressedJSON);
        System.out.println("decompressed === compressed? " + (strDecompressedJSON.equals(strJSON)));
	}

}
